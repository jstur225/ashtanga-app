# 用户通知功能及版本号说明

本文档记录所有用户通知功能（如气泡通知、弹窗等）的版本信息和更新方法。

---

## 小红书群邀请功能

### 当前版本信息

**版本号**: `v1`

**文案内容**:
```
0【全选复制，xiaohongshu等你归来】 3月1日前可入，"🆓熬汤日记内测交流群"趣味空间 MF8158 :/#b🤔🍉🐂😗🐯😉🐯🥭😌😚🐶🐭
```

**群号**: `MF8158`

---

## 如何更新文案

### 步骤 1：修改文案文件

打开文件：`components/XiaohongshuInviteModal.tsx`

**修改第 9 行 - 版本号**
```typescript
// 从
export const INVITE_VERSION = 'v1'

// 改为（每次更新都要递增版本号）
export const INVITE_VERSION = 'v2'
```

**修改第 12-13 行 - 文案内容**
```typescript
const XIAOHONGSHU_INVITE_TEXT =
  '0【全选复制，xiaohongshu等你归来】 3月1日前可入，"🆓熬汤日记内测交流群"趣味空间 MF8158 :/#b🤔🍉🐂😗🐯😉🐯🥭😌😚🐶🐭'
  // 改成你的新文案
```

### 步骤 2：提交并部署

```bash
git add components/XiaohongshuInviteModal.tsx
git commit -m "feat: 更新小红书邀请文案到 v2"
git push origin dev
```

### 步骤 3：验证效果

部署完成后（约 1-2 分钟）：
1. 用户刷新页面
2. 头像右上角会自动出现红点 ✨
3. 点击气泡查看新文案

---

## 工作原理

### 版本号控制机制

```typescript
// 用户已读的版本号（存储在 localStorage）
const readInviteVersion = localStorage.getItem('xhs_invite_version')

// 当前最新版本号
const INVITE_VERSION = 'v1'

// 判断是否显示红点
const hasNewXhsMessage = (readInviteVersion !== INVITE_VERSION)
```

### 逻辑流程

1. **首次访问**: `readInviteVersion = ''` → 显示红点
2. **用户点击气泡**: 保存 `INVITE_VERSION` 到 localStorage → 红点消失
3. **更新文案并部署**: 版本号改变（如 `v1` → `v2`）
4. **用户刷新**: `readInviteVersion = 'v1'` ≠ `INVITE_VERSION = 'v2'` → 显示红点 ✅

---

## 版本历史

| 版本号 | 日期 | 文案内容 | 群号 |
|--------|------|----------|------|
| v1 | 2026-02-01 | 0【全选复制，xiaohongshu等你归来】 3月1日前可入，"🆓熬汤日记内测交流群"趣味空间 MF8158 :/#b🤔🍉🐂😗🐯😉🐯🥭😌😚🐶🐭 | MF8158 |

---

## 测试方法

### 方法 1：清除 localStorage（测试用）

在浏览器控制台执行：
```javascript
localStorage.removeItem('xhs_invite_read')
localStorage.removeItem('xhs_invite_version')
location.reload()
```

### 方法 2：手动修改版本号

```javascript
// 模拟旧版本用户
localStorage.setItem('xhs_invite_version', 'v0')

// 刷新页面会看到红点
location.reload()
```

---

## 注意事项

1. **每次更新文案必须修改版本号**
   - 版本号格式建议：`v1`, `v2`, `v3`...
   - 不修改版本号用户不会看到红点

2. **文案格式要求**
   - 必须以 `0` 开头（小红书识别标记）
   - 包含完整的群号信息
   - emoji 表情保持原样

3. **群号更新**
   - 如果更换群号，记得同步更新文案中的群号

4. **测试验证**
   - 部署后用手机测试实际效果
   - 确认文案可以正常复制
   - 验证红点显示/消失逻辑

---

## 相关文件

- **弹窗组件**: `components/XiaohongshuInviteModal.tsx`
- **使用页面**: `app/practice/page.tsx`
- **样式文件**: `app/globals.css`
- **文档**: `小红书群邀请文案说明.md` (本文件)

---

## 联系方式

如有问题，请联系产品负责人 orange。
